<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simulador de Tráfico</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="container">
    <!-- Sidebar lateral -->
    <aside id="sidebar">
      <nav class="menu">
<div class="sidebar-header">
  <img class="icono-ciudad" src="imagenes/city.png" alt="Inicio" />
  <div class="loop-wrapper animacion-inicio">
    <div class="mountain"></div>
    <div class="hill"></div>
    <div class="tree"></div>
    <div class="tree"></div>
    <div class="tree"></div>
    <div class="rock"></div>
    <div class="truck"></div>
    <div class="wheels"></div>
  </div>
</div>

         <div class="titulo-urbano">
  TRÁFICO
  <div class="flip">
    <div><div>URBANO</div></div>
    <div><div>URBANO</div></div>
    <div><div>URBANO</div></div>
  </div>
</div>

<div class="swanky_wrapper">
  <input type="checkbox"  id="Opciones">
  <label for="Opciones">
    <img src="imagenes/settings.png" alt="Menú">
    <span class="menu-text">Opciones</span>
    <div class="lil_arrow"></div>
    <div class="bar"></div>
    <div class="swanky_wrapper__content">
      <ul>
        <li>Descargas</li>
        <li>Historial</li>
        <li>Configuración</li>
      </ul>
    </div>
  </label>

  <input type="checkbox"  id="Trafico">
  <label for="Trafico">
    <img src="imagenes/car-side.png" alt="Tráfico">
    <span class="menu-text">Tráfico</span>
    <div class="lil_arrow"></div>
    <div class="bar"></div>
    <div class="swanky_wrapper__content">
      <ul>
        <li>Congestión Alta</li>
        <li>Tráfico Moderado</li>
        <li>Tráfico Fluido</li>
      </ul>
    </div>
  </label>
</div>

      </nav>
    </aside>

    <!-- Contenido principal -->
    <main id="main-content">
      <div id="top-bar">
        <div class="input-section">
          <input type="text" id="instruction-input" placeholder="Escribe o di una instrucción..." />
          <button id="mic-button"><img src="imagenes/circle-microphone.png" alt="Micrófono" /></button>
          <button id="send-button"><img src="imagenes/paper-plane-top.png" alt="Enviar" /></button>
        </div>

        <!-- Botones Principales -->
        <div class="controls2">
          <button id="play-button"><img src="imagenes/play-circle.png" alt="Play" /></button>
          <button id="stop-button"><img src="imagenes/stop-circle.png" alt="Stop" /></button>
          <button id="reload-button"><img src="imagenes/reload.png" alt="Reload" /></button>
        </div>

        <!-- Botones Semáforo -->
        <div class="controls-semaforo">
          <button id="green-button"><img src="imagenes/green.png" alt="Verde" /></button>
          <button id="red-button"><img src="imagenes/red.png" alt="Rojo" /></button>
        </div>
      </div>

      <canvas id="mapaCanvas" width="800" height="600"></canvas>

      <footer id="bottom-info">
        <p><strong>Zona Seleccionada:</strong></p>
        <p>Rutas alternas</p>
      </footer>
    </main>
  </div>

  <script>
    // Función para reconocimiento de voz
    const micBtn = document.getElementById("mic-button");
    const inputField = document.getElementById("instruction-input");

    if ('webkitSpeechRecognition' in window) {
      const recognition = new webkitSpeechRecognition();
      recognition.lang = 'es-ES';
      recognition.continuous = false;
      recognition.interimResults = false;

      micBtn.addEventListener('click', () => {
        recognition.start();
      });

      recognition.onresult = (event) => {
        const texto = event.results[0][0].transcript;
        inputField.value = texto;
      };

      recognition.onerror = (event) => {
        console.error("Error en reconocimiento de voz:", event.error);
      };
    } else {
      console.warn("Reconocimiento de voz no soportado en este navegador.");
    }
  </script>
<script src="https://cdn.jsdelivr.net/npm/cannon-es@0.20.0/dist/cannon-es.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/cannon@0.6.2/build/cannon.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script src="trafico.js"></script>
<script>
  async function obtenerEstado() {
    const res = await fetch("http://localhost:8000/estado");
    const data = await res.json();
    console.log(data);

    
  }

  setInterval(obtenerEstado, 1000); // cada segundo
</script>

</body>
</html>
